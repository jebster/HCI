define("app/models/store",["app/models/todo","ember"],function(e){return function(t){this.name=t;var n=localStorage.getItem(this.name);this.data=n&&JSON.parse(n)||{};this.save=function(){localStorage.setItem(this.name,JSON.stringify(this.data))};this.createFromTitle=function(t){var n=e.create({title:t,store:this});this.create(n);return n};this.create=function(e){e.get("id")||e.set("id",Date.now());return this.update(e)};this.update=function(e){this.data[e.get("id")]=e.getProperties("id","title","completed");this.save();return e};this.find=function(t){var n=e.create(this.data[t.get("id")]);n.set("store",this);return n};this.findAll=function(){var t=[],n;for(n in this.data){var r=e.create(this.data[n]);r.set("store",this);t.push(r)}return t};this.remove=function(e){delete this.data[e.get("id")];this.save();return e}}});