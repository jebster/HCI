YUI.add("todo-app",function(e){"use strict";var t=e.TodoMVC.TodoList,n=e.TodoMVC.TodoView,r;r=e.Base.create("todoApp",e.App,[],{containerTemplate:"#todoapp",template:e.Handlebars.compile(e.one("#stats-template").getHTML()),events:{"#new-todo":{keypress:"enterCreate"},"#clear-completed":{click:"clearCompleted"},"#toggle-all":{click:"completeAll"}},initializer:function(){this.set("todoList",new t);var n=this.get("todoList");e.Handlebars.registerHelper("pluralize",function(e,t){return e===1?t:t+"s"});n.after(["add","remove","reset","todo:completedChange"],this.render,this);n.load();this.once("ready",function(e){this.hasRoute(this.getPath())&&this.dispatch()})},render:function(){var e=this.get("todoList"),t=e.completed().size(),n=e.remaining().size(),r=this.get("container"),i=this.get("main"),s=this.get("footer");if(e.size()){i.show();s.show();s.setHTML(this.template({completed:t,remaining:n}));r.one("#filters li a").removeClass("selected");r.all("#filters li a").filter('[href="#/'+(this.get("filter")||"")+'"]').addClass("selected")}else{i.hide();s.hide()}this.get("allCheckbox").set("checked",!n);this.addViews()},addViews:function(){var t=e.one(e.config.doc.createDocumentFragment()),r=this.get("todoList"),i;switch(this.get("filter")){case"active":i=r.remaining();break;case"completed":i=r.completed();break;default:i=r}i.each(function(e){var r=new n({model:e});t.append(r.render().get("container"))});this.get("container").one("#todo-list").setContent(t)},enterCreate:function(t){var n=13,r=this.get("todoList"),i=this.get("inputNode"),s=e.Escape.html(e.Lang.trim(i.get("value")));if(t.keyCode!==n||!s)return;r.create({title:s});i.set("value","")},clearCompleted:function(e){var t=this.get("todoList"),n=t.completed();t.remove(n);n.each(function(e){e.clear()})},completeAll:function(){var t=this.get("todoList"),n=this.get("allCheckbox"),r=n.get("checked");e.Array.each(t.toArray(),function(e){e.save({completed:r})})},handleFilter:function(e){this.set("filter",e.params.filter);this.get("todoList").load()}},{ATTRS:{container:{valueFn:function(){return e.one("#todoapp")}},inputNode:{valueFn:function(){return e.one("#new-todo")}},allCheckbox:{valueFn:function(){return e.one("#toggle-all")}},main:{valueFn:function(){return e.one("#main")}},footer:{valueFn:function(){return e.one("#footer")}},serverRouting:{value:!1},filter:{value:null},routes:{value:[{path:"/:filter",callback:"handleFilter"}]}}});e.namespace("TodoMVC").TodoApp=r},"@VERSION@",{requires:["app","todo-list","todo-view","node","event-focus"]});