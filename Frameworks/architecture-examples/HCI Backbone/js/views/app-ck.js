var app=app||{},ENTER_KEY=13;$(function(e){"use strict";app.AppView=Backbone.View.extend({el:"#container",events:{"keypress #new-activity":"createOnEnter"},initialize:function(){this.navBar();this.input=this.$("#new-activity");window.app.Activities.on("add",this.addAll,this);window.app.Activities.on("reset",this.addAll,this);window.app.Activities.on("change:completed",this.addAll,this);window.app.Activities.on("all",this.render,this);app.Activities.fetch()},navBar:function(){e("footer .nav li").click(function(){e("#container").find(".cat-display").removeClass("cat-display");e("footer .nav").find(".active").removeClass("active");e(this).addClass("active");var t=e(this).index();switch(t){case 1:e("#graphs").addClass("cat-display");break;case 2:e("#category").addClass("cat-display");break;default:e("#today").addClass("cat-display")}})},render:function(){},createOnEnter:function(e){if(e.which!==ENTER_KEY||!this.input.val().trim())return;app.Activities.create(this.newAttributes());this.input.val("")},newAttributes:function(){return{title:this.input.val().trim()}},addAll:function(){this.$("#category ul").html("");app.Activities.each(this.addOne,this)},addOne:function(t){var n=new app.ActivityView({model:t});e("#category ul").append(n.render().el)}});new app.AppView});