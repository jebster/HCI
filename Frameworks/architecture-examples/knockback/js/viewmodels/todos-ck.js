// Generated by CoffeeScript 1.3.3
(function(){var e;e=function(e){var t=this;this.editing=ko.observable(!1);this.completed=kb.observable(e,{key:"completed",read:function(){return e.completed()},write:function(t){return e.completed(t)}},this);this.visible=ko.computed(function(){switch(app.viewmodels.settings.list_filter_mode()){case"active":return!t.completed();case"completed":return t.completed();default:return!0}});this.title=kb.observable(e,{key:"title",write:function(n){$.trim(n)?e.save({title:$.trim(n)}):_.defer(function(){return e.destroy()});return t.editing(!1)}},this);this.onDestroyTodo=function(){return e.destroy()};this.onCheckEditBegin=function(){if(!t.editing()&&!t.completed())return t.editing(!0)};this.onCheckEditEnd=function(e,n){if(n.keyCode===13||n.type==="blur"){$(".todo-input").blur();return t.editing(!1)}};return this};window.TodosViewModel=function(t){var n=this;this.todos=kb.collectionObservable(t,{view_model:e});this.todos.collection().bind("change",function(){return n.todos.valueHasMutated()});this.tasks_exist=ko.computed(function(){return n.todos().length});this.all_completed=ko.computed({read:function(){return!n.todos.collection().remainingCount()},write:function(e){return n.todos.collection().completeAll(e)}});return this}}).call(this);